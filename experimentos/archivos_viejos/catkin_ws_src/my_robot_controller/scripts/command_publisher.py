#!/usr/bin/env python3
import rospy
import time
from my_robot_controller.msg import MotorControl
from my_robot_controller.msg import MotorFeedback

positions_array12=[0.1064, 0.1005, 0.0966, 0.0946, 0.0942, 0.0951, 0.0973, 0.1004, 0.1044, 0.109, 0.1141, 0.1197, 0.1255, 0.1315, 0.1375, 0.1436, 0.1495, 0.1553, 0.1609, 0.1662, 0.1712, 0.1758, 0.1801, 0.184, 0.1874, 0.1904, 0.193, 0.1951, 0.1968, 0.198, 0.1989, 0.1993, 0.1993, 0.1989, 0.1981, 0.197, 0.1956, 0.1939, 0.1919, 0.1897, 0.1873, 0.1846, 0.1818, 0.1789, 0.1758, 0.1727, 0.1694, 0.1662, 0.1629, 0.1597, 0.1564, 0.1532, 0.1501, 0.1471, 0.1441, 0.1413, 0.1386, 0.136, 0.1335, 0.1312, 0.1291, 0.1271, 0.1253, 0.1236, 0.1221, 0.1208, 0.1196, 0.1185, 0.1176, 0.1168]
positions_array13=[0.0486, 0.0751, 0.0960, 0.1085, 0.1241, 0.1323, 0.1374, 0.1398, 0.1399, 0.1380, 0.1347, 0.1301, 0.1246, 0.1183, 0.1116, 0.1047, 0.0976, 0.0905, 0.0836, 0.0770, 0.0707, 0.0649, 0.0595, 0.0547, 0.0504, 0.0466, 0.0434, 0.0407, 0.0386, 0.0370, 0.0359, 0.0352, 0.0349, 0.0350, 0.0355, 0.0362, 0.0371, 0.0383, 0.0395, 0.0409, 0.0424, 0.0438, 0.0453, 0.0467, 0.0479, 0.0491, 0.0502, 0.0510, 0.0517, 0.0522, 0.0525, 0.0527, 0.0526, 0.0523, 0.0518, 0.0512, 0.0504, 0.0495, 0.0485, 0.0474, 0.0463, 0.0451, 0.0440, 0.0429, 0.0419, 0.0410, 0.0402, 0.0397, 0.0393, 0.0391]

positions_array22=[-0.1197, -0.1169, -0.1144, -0.1123, -0.1104, -0.1088, -0.1075, -0.1065, -0.1057, -0.1051, -0.1048, -0.1047, -0.1049, -0.1052, -0.1058, -0.1065, -0.1074, -0.1085, -0.1098, -0.1112, -0.1127, -0.1144, -0.1162, -0.1181, -0.1201, -0.1222, -0.1244, -0.1266, -0.1289, -0.1313, -0.1337, -0.1362, -0.1387, -0.1412, -0.1437, -0.1462, -0.1486, -0.1511, -0.1535, -0.1559, -0.1583, -0.1605, -0.1627, -0.1648, -0.1669, -0.1688, -0.1706, -0.1723, -0.1739, -0.1753, -0.1766, -0.1777, -0.1787, -0.1794, -0.1800, -0.1804, -0.1806, -0.1806, -0.1803, -0.1799, -0.1791, -0.1781, -0.1769, -0.1754, -0.1735, -0.1714, -0.1690, -0.1663, -0.1633, -0.1599, -0.1562, -0.1521, -0.1477, -0.1429, -0.1377, -0.1321, -0.1262, -0.1198]
positions_array23=[0.0088, 0.0244, 0.0386, 0.0516, 0.0635, 0.0741, 0.0837, 0.0923, 0.0999, 0.1065, 0.1122, 0.1171, 0.1212, 0.1245, 0.1271, 0.1290, 0.1303, 0.1310, 0.1311, 0.1307, 0.1298, 0.1285, 0.1268, 0.1246, 0.1222, 0.1194, 0.1164, 0.1131, 0.1095, 0.1058, 0.1019, 0.0979, 0.0937, 0.0895, 0.0852, 0.0808, 0.0764, 0.0720, 0.0676, 0.0633, 0.0590, 0.0548, 0.0506, 0.0465, 0.0426, 0.0388, 0.0351, 0.0315, 0.0281, 0.0249, 0.0218, 0.0189, 0.0162, 0.0136, 0.0113, 0.0091, 0.0072, 0.0054, 0.0038, 0.0024, 0.0012, 0.0002, -0.0006, -0.0013, -0.0017, -0.0020, -0.0022, -0.0022, -0.0021, -0.0018, -0.0015, -0.0010, -0.0005, 0.0002, 0.0008, 0.0016, 0.0023, 0.0030]

positions_array32=[-0.0757, -0.0637, -0.0535, -0.0451, -0.0383, -0.0329, -0.0290, -0.0264, -0.0250, -0.0247, -0.0255, -0.0272, -0.0297, -0.0331, -0.0372, -0.0419, -0.0471, -0.0529, -0.0590, -0.0655, -0.0723, -0.0793, -0.0865, -0.0938, -0.1012, -0.1085, -0.1158, -0.1230, -0.1301, -0.1370, -0.1437, -0.1502, -0.1563, -0.1621, -0.1676, -0.1728, -0.1775, -0.1818, -0.1856, -0.1890, -0.1920, -0.1945, -0.1964, -0.1979, -0.1989, -0.1994, -0.1994, -0.1989, -0.1979, -0.1964, -0.1944, -0.1920, -0.1892, -0.1859, -0.1822, -0.1782, -0.1738, -0.1690, -0.1640, -0.1587, -0.1532, -0.1475, -0.1417, -0.1357, -0.1297, -0.1237, -0.1177, -0.1118, -0.1061, -0.1006]
positions_array33=[-0.0434, -0.0323, -0.0196, -0.0057, 0.0089, 0.0238, 0.0386, 0.0531, 0.0670, 0.0800, 0.0921, 0.1030, 0.1126, 0.1209, 0.1277, 0.1332, 0.1372, 0.1398, 0.1405, 0.1400, 0.1394, 0.1368, 0.1330, 0.1283, 0.1226, 0.1161, 0.1090, 0.1012, 0.0929, 0.0843, 0.0755, 0.0665, 0.0574, 0.0484, 0.0396, 0.0310, 0.0228, 0.0149, 0.0075, 0.0006, -0.0058, -0.0115, -0.0166, -0.0211, -0.0249, -0.0281, -0.0306, -0.0326, -0.0339, -0.0346, -0.0349, -0.0347, -0.0341, -0.0331, -0.0319, -0.0305, -0.0290, -0.0274, -0.0259, -0.0245, -0.0234, -0.0224, -0.0219, -0.0217, -0.0220, -0.0228, -0.0242, -0.0261, -0.0286, -0.0316]
if __name__ =='__main__':
    rospy.init_node("command_publisher")

    rospy.loginfo("Node has been started")

    pubMotor1 = rospy.Publisher("/motor1_control",MotorFeedback,queue_size=5)
    pubMotor2 = rospy.Publisher("/motor2_control",MotorFeedback,queue_size=5)
    pubMotor3 = rospy.Publisher("/motor3_control",MotorFeedback,queue_size=5)

    rate = rospy.Rate(2)

    while not rospy.is_shutdown():
        #publish commands

        msgMotor1 = MotorFeedback()
        ##msgMotor1.motor_id_out = 1
        msgMotor1.position_out = -0.15

        ##69 positions for routine 1-3, 77 positins for routine 2
        for i in range(0,69):
            msgMotor2 = MotorFeedback()
            msgMotor3 = MotorFeedback()

            msgMotor2.motor_id_out = 2
            msgMotor2.position_out = positions_array12[i]*-1
            ##msgMotor2.position_out = positions_array22[i]
            ##msgMotor2.position_out = positions_array32[i]

            msgMotor3.motor_id_out = 3
            msgMotor3.position_out = positions_array13[69-i]
            ##msgMotor3.position_out = positions_array23[77-i]
            ##msgMotor3.position_out = positions_array33[69-i]

            pubMotor2.publish(msgMotor2)
            pubMotor3.publish(msgMotor3)

            time.sleep(0.035)
        """
        msgMotor2 = MotorFeedback()
        msgMotor2.motor_id_out = 2
        msgMotor2.position_out = 5

        
        msgMotor3.motor_id_out = 3
        msgMotor3.position_out = 5

        
        pubMotor2.publish(msgMotor2)
        pubMotor3.publish(msgMotor3)
        """

        pubMotor1.publish(msgMotor1)
        rate.sleep()